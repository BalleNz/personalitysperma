from src.core.schemas.personality_types.socionics_type import UserSocionicsSchema


def get_reinin_descriptions(schema: UserSocionicsSchema) -> str:
    """Возвращает текстовое описание всех признаков Рейнина с абзацами от лица психолога"""

    descriptions = {
        "static": {
            "Статик": "Мир для тебя — это набор состояний и качеств, а не процессов. "
                      "Ты скорее оцениваешь «кто есть кто» и «что есть что», чем «что происходит и куда движется». "
                      "Это даёт тебе стабильность восприятия, но иногда сложно «ловить момент».",

            "Динамик": "Мир для тебя — это движение, изменения и процессы. "
                       "Ты скорее видишь «что происходит» и «куда всё движется», чем статичные характеристики. "
                       "Это помогает быстро реагировать, но иногда теряется целостная картина."
        },
        "positivist": {
            "Позитивист": "Ты легче замечаешь наличие качеств, возможностей и плюсов. "
                          "«Это есть» и «это можно» приходят в голову быстрее, чем «этого нет». "
                          "Это даёт оптимизм и веру в перспективы, но иногда пропускаются риски.",

            "Негативист": "Ты легче видишь отсутствие качеств, ограничения и потенциальные проблемы. "
                          "«Этого нет» и «это не получится» приходят в голову быстрее, чем «это есть». "
                          "Это помогает предвидеть опасности, но иногда мешает увидеть возможности."
        },
        "process": {
            "Процесс": "Для тебя важен сам ход событий, последовательность и этапы. "
                       "Ты проживаешь путь, а не только финиш. "
                       "Это даёт глубокое понимание, но иногда тормозит скорость.",

            "Результат": "Для тебя главное — итог и достижение цели. "
                         "Промежуточные детали могут быть пропущены ради результата. "
                         "Это помогает быстро двигаться вперёд, но иногда теряется глубина."
        },
        "declaring": {
            "Деклатим": "Ты легко начинаешь, прямо заявляешь о себе и своих мыслях. "
                        "Речь чаще звучит как монолог с точками, а не с вопросами. "
                        "Это даёт инициативу, но иногда кажется слишком напористым.",

            "Демонстратив": "Ты предпочитаешь диалог, ждёшь отклика и реакции собеседника. "
                            "Речь чаще звучит как вопросы и поддерживающие реплики. "
                            "Это помогает выстраивать контакт, но иногда сложно начать первым."
        },
        "constructivist": {
            "Конструктивист": "Ты строишь логические системы, связи и структуры. "
                              "Важны причинно-следственные цепочки и порядок. "
                              "Это даёт ясность мышления, но иногда отодвигает эмоции на второй план.",

            "Эмотивист": "Ты ориентируешься на эмоции, атмосферу и отношения. "
                         "Важно «как это ощущается» и «как люди к этому относятся». "
                         "Это даёт эмпатию и тепло, но иногда сложно быть строгим и объективным."
        },
        "careful": {
            "Рассудительный": "Решения принимаются взвешенно, с анализом последствий. "
                              "Ты избегаешь ненужных рисков и ценишь предсказуемость. "
                              "Это даёт надёжность, но иногда замедляет действие.",

            "Решительный": "Решения принимаются быстро, часто импульсивно. "
                           "Ты легко идёшь на риск и адаптируешься на ходу. "
                           "Это даёт скорость и гибкость, но иногда приводит к ошибкам."
        },
        "farsighted": {
            "Дальновидный": "Ты смотришь далеко вперёд и учитываешь отдалённые последствия. "
                            "Стратегия и долгосрочные цели для тебя приоритет. "
                            "Это помогает строить будущее, но иногда теряется «здесь и сейчас».",

            "Беспечный": "Ты живёшь настоящим и не сильно тревожишься о далёком будущем. "
                         "Спонтанность и момент важнее долгосрочных планов. "
                         "Это даёт лёгкость и яркость жизни, но иногда подводит с последствиями."
        },
        "judicious": {
            "Рассудительный": "Ты проявляешь осмотрительность в суждениях и поступках. "
                              "Анализируешь ситуацию перед действием, ценишь стабильность. "
                              "Это даёт взвешенность, но может снижать скорость реакции.",

            "Решительный": "Ты склонен к быстрым решениям и действиям. "
                           "Не боишься неопределённости и легко меняешь планы. "
                           "Это даёт оперативность, но иногда приводит к поспешности."
        },
        "tactical": {
            "Тактик": "Ориентирован на ближайшие цели и конкретные шаги. "
                      "Хорошо видишь, что нужно сделать прямо сейчас. "
                      "Это делает тебя эффективным в моменте, но иногда теряется большая картина.",

            "Стратег": "Ориентирован на глобальные цели и долгосрочные тренды. "
                       "Видишь общую картину и куда всё идёт. "
                       "Это помогает планировать далеко вперёд, но иногда упускаются детали."
        },
        "questioning": {
            "Вопрошающий": "Склонен задавать вопросы и искать информацию. "
                           "Тебе важно прояснить детали и получить ответы. "
                           "Это помогает глубже разбираться, но иногда затягивает обсуждение.",

            "Утверждающий": "Склонен заявлять своё мнение и высказываться прямо. "
                            "Тебе важнее озвучить позицию, чем получить подтверждение. "
                            "Это даёт уверенность, но иногда кажется категоричным."
        },
        "merging": {
            "Объединяющий": "Ищешь общее, связи и сходства между людьми и идеями. "
                            "Хорошо создаёшь гармонию и работаешь в команде. "
                            "Это помогает сплачивать, но иногда размываются границы.",

            "Разделяющий": "Видишь различия, границы и противоречия. "
                           "Склонен к анализу и независимой позиции. "
                           "Это даёт чёткость и самостоятельность, но иногда мешает сближению."
        },

        "aristocratic": {
            "Аристократ": "Ты воспринимаешь людей через их принадлежность к группам, кругам, «своим» и «чужим». "
                          "Тебе важно, кто из какой «тусовки», класса, системы. "
                          "Это даёт сильное чувство «мы» и лояльность к своим, но иногда мешает видеть индивидуальность.",

            "Демократ": "Ты оцениваешь людей в первую очередь по их личным качествам, независимо от группы или статуса. "
                        "«Человек человеку — друг» важнее, чем «свой-чужой». "
                        "Это помогает быть открытым ко всем, но иногда теряется ощущение «своей стаи»."
        },
        "merry": {
            "Весёлый": "Ты легко включаешься в эмоциональную атмосферу, любишь шутки, лёгкость, эмоциональный обмен. "
                       "Тебе комфортно в компаниях, где много смеха и живого контакта. "
                       "Это делает тебя душой компании, но иногда сложно в серьёзных, строгих ситуациях.",

            "Серьёзный": "Ты больше ценишь глубину, серьёзность, смысл, чем поверхностное веселье. "
                         "Тебе важнее суть разговора, чем его эмоциональная окраска. "
                         "Это даёт надёжность и сосредоточенность, но иногда кажется отстранённостью."
        },
        "yielding": {
            "Уступчивый": "Ты склонен подстраиваться под других, идти на компромисс, учитывать чужое мнение. "
                          "Тебе легче уступить, чем стоять на своём до конца. "
                          "Это помогает избегать конфликтов и сохранять отношения, но иногда теряется своя позиция.",

            "Упрямый": "Ты отстаиваешь свои интересы и границы, не любишь уступать без веской причины. "
                       "Тебе важно сохранить контроль над ситуацией и своими ресурсами. "
                       "Это даёт силу и независимость, но иногда приводит к ненужным спорам."
        }
    }

    result = []

    # [ ИНДИВИДУАЛЬНЫЕ ПРИЗНАКИ ]
    result.append("<b>ИНДИВИДУАЛЬНЫЕ ПРИЗНАКИ:</b>\n\n")
    result.append("<blockquote>")

    # Статика/Динамика
    if schema.static:
        result.append(f"<b>— {schema.static}:</b> {descriptions['static'][schema.static]}")

    # Позитивизм/Негативизм
    if schema.positivist:
        result.append(f"\n\n<b>— {schema.positivist}:</b> {descriptions['positivist'][schema.positivist]}")

    # Деклатимность/Демонстративность
    if schema.declaring:
        result.append(f"\n\n<b>— {schema.declaring}:</b> {descriptions['declaring'][schema.declaring]}")

    # Конструктивизм/Эмотивизм
    if schema.constructivist:
        result.append(f"\n\n<b>— {schema.constructivist}:</b> {descriptions['constructivist'][schema.constructivist]}")

    # Тактика/Стратегия
    if schema.tactical:
        result.append(f"\n\n<b>— {schema.tactical}:</b> {descriptions['tactical'][schema.tactical]}")

    # Вопрошание/Утверждение
    if schema.questioning:
        result.append(f"\n\n<b>— {schema.questioning}:</b> {descriptions['questioning'][schema.questioning]}")

    # Объединяющий/Разделяющий
    if schema.merging:
        result.append(f"\n\n<b>— {schema.merging}:</b> {descriptions['merging'][schema.merging]}")
    result.append("</blockquote>")

    # [ ДУАЛЬНЫЕ ПРИЗНАКИ ]
    result.append("\n\n<b>ДУАЛЬНЫЕ ПРИЗНАКИ</b>:\n\n")
    result.append("<blockquote>")

    # Процесс/Результат
    if schema.process:
        result.append(f"<b>— {schema.process}:</b> {descriptions['process'][schema.process]}")

    # Рассудительность/Решительность
    if schema.careful:
        result.append(f"\n\n<b>— {schema.careful}:</b> {descriptions['careful'][schema.careful]}")

    # Дальновидность/Беспечность
    if schema.farsighted:
        result.append(f"\n\n<b>— {schema.farsighted}:</b> {descriptions['farsighted'][schema.farsighted]}")

    if hasattr(schema, 'yielding') and schema.yielding:
        result.append(f"\n\n<b>— {schema.yielding}:</b> {descriptions['yielding'][schema.yielding]}")

    result.append("</blockquote>")

    # [ КВАДРАЛЬНЫЕ ]
    result.append("\n\n<b>КВАДРАЛЬНЫЕ ПРИЗНАКИ:</b>\n\n")
    result.append("<blockquote>")

    if hasattr(schema, 'aristocratic') and schema.aristocratic:
        result.append(f"<b>— {schema.aristocratic}:</b> {descriptions['aristocratic'][schema.aristocratic]}")

    if hasattr(schema, 'merry') and schema.merry:
        result.append(f"\n\n<b>— {schema.merry}:</b> {descriptions['merry'][schema.merry]}")

    # Рассудительность/Решительность
    if schema.judicious:
        result.append(f"\n\n<b>— {schema.judicious}:</b> {descriptions['judicious'][schema.judicious]}")

    result.append("</blockquote>")

    return "".join(result)


def get_mbti_briefly_description(mbti_type: str) -> str:
    """Краткое интересное описание типа (MBTI-нотация, на основе соционики)"""

    descriptions = {
        "ENTP": "Человек с мощным стратегическим воображением и кучей нестандартных идей. Постоянно ищет что-то принципиально новое и почти не ценит прошлые достижения. Живёт по интересу, а не по выгоде.\n\n"
                "Много думает в одиночестве, видит неожиданные закономерности, легко идёт против общепринятого. В быту уступчив и хаотичен, но в трудных ситуациях быстро соображает. Не терпит давления и жёстких рамок.\n\n"
                "В общении открыт, демократичен, со всеми одинаково доброжелателен. Нуждается в эмоциональных «подзарядках» и в искреннем интересе собеседника к своим мыслям.",

        "ISFP": "Мастер комфорта и житейских радостей, всегда дружелюбный и дипломатичный. Внимателен к удобствам своим и близких, ценит хороший вкус, уют, вкусную еду. Умеет мягко уговорить и создать гармонию.\n\n"
                "В быту практичен руками, гостеприимен, избегает конфликтов и критики. В трудных ситуациях проявляет мягкую смекалку и заботу. Не навязывает волю, держит золотую середину.\n\n"
                "В общении приятный и участливый. Нуждается в тёплом взаимном внимании и положительных эмоциях без давления.",

        "ESFJ": "Эмоциональный и энергичный энтузиаст, создаёт уют и поднимает настроение всем вокруг. Мастер организации праздников, застолий и помощи, отлично чувствует нужды людей.\n\n"
                "В быту суетлив, но эффективен, любит угощать и делать приятное. Плохо предвидит беды, ждёт только хорошего. В кризисах подавляет эмоции и действует целенаправленно.\n\n"
                "Не терпит недооценки своих стараний, вспыхивает, но быстро отходит. В общении прямой, этичный и требовательный. Нуждается в признании и тёплых позитивных эмоциях.",

        "INTP": "Аналитичный и принципиальный, мастер чёткой логики, структур и новых решений. Много размышляет внутри, объективен, резок в суждениях, видит общие закономерности.\n\n"
                "В быту скромен, минималистичен, домашние дела угнетают. Стремится к полной независимости и свободе. Не терпит принуждения и ненужных правил, просто игнорирует их.\n\n"
                "В общении сдержан, держит дистанцию. Поддерживает только значимые беседы. Нуждается в уважении к своим взглядам и личном пространстве.",

        "ENFJ": "Драматичный и вдохновляющий, с глобальным видением идей, романтик. Создаёт яркие проекты и предупреждает об опасностях. Много размышляет о смысле жизни, колеблется в повседневности.\n\n"
                "Забывает о еде и отдыхе при деле, одевается эксцентрично. В трудностях мобилизует людей, но может сорваться эмоционально.\n\n"
                "В общении оратор с пафосом, сарказмом и юмором, навязчив в сплетнях и фантазиях. Нуждается в эмоциональной разрядке, компаниях с позитивом и вере в свои грандиозные замыслы.",

        "ISTJ": "Дисциплинированный и реалистичный, трезвый аналитик фактов и норм. Строгий к порядку и деталям, глубоко прорабатывает материал. Ценит точность и доказательства.\n\n"
                "В быту содержит всё в идеальном порядке, мастер на все руки, неприхотлив. Стойко переносит невзгоды, настойчив и требователен.\n\n"
                "В общении вежлив и назидателен в малом кругу. Нуждается в уединении, эмоциональной адекватности, практичности и щедрости от близких.",

        "ESTP": "Волевой и стратегический, решительный лидер. Просчитывает планы как шахматную партию, идёт к крупным целям несмотря ни на что. Гибок в тактике, концентрируется на слабостях.\n\n"
                "В быту расслаблен, но в деле — железная выдержка и работоспособность. Трудно выводит из себя, но в гневе не остановить.\n\n"
                "В общении сдержан, корректен, провоцирует на активность и проверяет людей делом. Нуждается в азарте борьбы, положительных эмоциях при работе и уважении к результату.",

        "INFJ": "Мечтательный и эмпатичный, романтик-фантазёр. Видит причинно-следственные связи, альтернативы и скрытый смысл. Погружён в мир идей, психологии и красоты.\n\n"
                "В быту неорганизован, капризен, расточителен, любит, когда ухаживают. Под давлением гибок эмоционально, уходит в мечты или манипулирует настроением.\n\n"
                "В общении обаятелен, утешает, кокетлив и болтлив. Нуждается в заботе, жалости, психологической поддержке и тёплой гармонии.",

        "ENTJ": "Предприимчивый и изобретательный, загорается новыми идеями и проектами. Работает на опережение, логика быстрая, жизнестоек и рисковый.\n\n"
                "В быту непоседлив, экспериментирует, мало заботится о комфорте и порядке. Не боится давления и риска, при необходимости жёстко требует.\n\n"
                "В общении экстраверт, ироничный шутник с лукавым юмором. Легко втягивает в авантюры. Нуждается в практической отдаче, приключениях и свободе действий.",

        "ISFJ": "Принципиальный и защитный, живёт чувством долга и моралью. Строго разделяет своих и чужих. Практичен в повседневности, поддерживает порядок на своей территории.\n\n"
                "В быту тщательно убирает, с трудом меняет привычки. При давлении или несправедливости резко контратакует и мстит.\n\n"
                "В общении критичен, даёт моральные оценки. Нуждается в полной взаимности, справедливости и физической дистанции от посторонних.",

        "ESFP": "Яркий и напористый, стремится к новым впечатлениям и восхищению. Мастер манипуляции чувствами и расширения связей. Беспечен в быту, легко мирится и ссорится.\n\n"
                "Бурно протестует против любых ограничений и критики.\n\n"
                "В общении — центр внимания, делает комплименты, говорит то, что хотят услышать. Нуждается в постоянном восхищении, положительных эмоциях и свободе активности.",

        "INTJ": "Скептичный и предусмотрительный, мастер подмечать противоречия и упущения. Предсказывает ход событий, логика педантичная, всё просчитывает в уме.\n\n"
                "В быту бережлив, гурман, окружает себя привычными удобствами. Не любит суету, авралы и бурные эмоции, раздражается от них.\n\n"
                "В общении ироничный спорщик, нетороплив. Нуждается в спокойствии, внутреннем равновесии и отсутствии раздражителей.",

        "ESTJ": "Практичный и организованный, консерватор стабильности. Борец с хаосом и сторонник традиций. Логика фактов, горячо отстаивает своё мнение.\n\n"
                "В быту аккуратен, подтянут, активен и работоспособен. При критике работы или неудачах вспыхивает яростью.\n\n"
                "В общении сух в делах, но радушен неформально, осуждает сплетни. Нуждается в честности, порядке и возможности основательно отдыхать.",

        "INFP": "Гуманный и тактичный, миротворец и глубокий аналитик отношений и морали. Внутренне объективен и пунктуален.\n\n"
                "В быту дисциплинирован, любит чистоту и размеренный ритм. Под давлением или грубостью игнорирует или прощает, но не измену.\n\n"
                "В общении выслушивает, примиряет, сочувствует без осуждения. Нуждается в искренности, взаимной поддержке и этичной гармонии.",

        "ENFP": "Проницательный и альтруистичный, видит мотивы людей и находит выходы из ситуаций. Авантюрен, часто меняет увлечения. Логика эмоциональная и сумбурная.\n\n"
                "Устаёт от рутины и дисциплины. В экстремальных ситуациях мобилизуется и даёт отпор.\n\n"
                "В общении ободряет, вселяет надежду, искренен и располагает к доверию. Нуждается в эмоциональном отклике, близком круге друзей и свободе от скуки.",

        "ISTP": "Практичный и изобретательный в деле, прагматик. Ценит комфорт, добротные вещи и осязаемую пользу. Упрям в своих убеждениях и кодексе чести.\n\n"
                "В быту экономен, мастер руками, любит природу и острые ощущения. Под давлением становится резким, грубым или впадает в апатию.\n\n"
                "В общении скептичен, холоден, объясняет наглядно. Нуждается в похвале, тонком обращении и душевном равновесии."
    }

    key = mbti_type.strip().upper()
    return descriptions.get(key, f"Неизвестный MBTI-тип: {mbti_type}")


def get_relationships_description(
        mbti_type_1: str,
        mbti_type_2: str
) -> str:
    """Возвращает описание взаимоотношений между двумя людьми"""


# 4. Рекомендации по партнёрству:
# dual — идеальный партнёр
# activation — бодрящие отношения
# mirror — зеркальный тип
# kindred — родственный по ценностям
# business — хороший коллега
